(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[573],{5932:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return m},toc:function(){return s},default:function(){return p}});var a=n(2122),i=n(9756),l=(n(7294),n(3905)),r=["components"],o={title:"What is inside .env ?",hide_title:!0,hide_table_of_contents:!1,description:"Description of .env",keywords:["discord","moodle","bot"],slug:"/whats-inside-env"},m={unversionedId:"What is inside env",id:"What is inside env",isDocsHomePage:!1,title:"What is inside .env ?",description:"Description of .env",source:"@site/moodlebot/What is inside env.md",sourceDirName:".",slug:"/whats-inside-env",permalink:"/moodle-notification-service/whats-inside-env",editUrl:"https://github.com/tjarbo/documentation/tree/master/docs/moodlebot/moodlebot/What is inside env.md",version:"current",frontMatter:{title:"What is inside .env ?",hide_title:!0,hide_table_of_contents:!1,description:"Description of .env",keywords:["discord","moodle","bot"],slug:"/whats-inside-env"},sidebar:"tutorialSidebar",previous:{title:"Run on Heroku and MongoDB Atlas",permalink:"/moodle-notification-service/setup-with-heroku-mongodb-atlas"}},s=[{value:"\ud83c\udfad Templates",id:"-templates",children:[]},{value:"\ud83e\udd13 Description",id:"-description",children:[{value:"\ud83d\udd34 ADMIN_ID",id:"-admin_id",children:[]},{value:"\ud83d\udd34 ADMIN_NAME",id:"-admin_name",children:[]},{value:"\ud83d\udd34 DISCORD_CHANNEL",id:"-discord_channel",children:[]},{value:"\ud83d\udd34 DISCORD_TOKEN",id:"-discord_token",children:[]},{value:"\ud83d\udd34 JWT_SECRET \u26a0\ufe0f",id:"-jwt_secret-\ufe0f",children:[]},{value:"JWT_EXPIRESIN",id:"jwt_expiresin",children:[]},{value:"\ud83d\udd34 MONGO_HOST",id:"-mongo_host",children:[]},{value:"MONGOOSE_DEBUG (only needed for development)",id:"mongoose_debug-only-needed-for-development",children:[]},{value:"\ud83d\udd34 MOODLE_BASE_URL",id:"-moodle_base_url",children:[]},{value:"MOODLE_FETCH_INTERVAL",id:"moodle_fetch_interval",children:[]},{value:"MOODLE_REMINDER_TIME_LEFT",id:"moodle_reminder_time_left",children:[]},{value:"\ud83d\udd34 MOODLE_TOKEN",id:"-moodle_token",children:[]},{value:"MOODLE_USE_COURSE_SHORTNAME",id:"moodle_use_course_shortname",children:[]},{value:"\ud83d\udd34 MOODLE_USERID",id:"-moodle_userid",children:[]},{value:"NODE_ENV",id:"node_env",children:[]},{value:"PORT",id:"port",children:[]}]}],d={toc:s};function p(e){var t=e.components,n=(0,i.Z)(e,r);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"-templates"},"\ud83c\udfad Templates"),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"Only requiered variables")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ADMIN_ID=00000...000\nADMIN_NAME=username#00000\nDISCORD_CHANNEL=00000...000\nDISCORD_TOKEN=XXXXXX....XXX\nJWT_SECRET=\nMONGO_HOST=mongodb://mongo:27017/fmdb\nMOODLE_BASE_URL=https://moodle.example.com/\nMOODLE_TOKEN=XXXXXXXXXXXXXXXXX\nMOODLE_USERID=00000\n")),(0,l.kt)("p",null,(0,l.kt)("strong",{parentName:"p"},"All available variables")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"ADMIN_ID=00000...000\nADMIN_NAME=username#00000\nDISCORD_CHANNEL=00000...000\nDISCORD_TOKEN=XXXXXX....XXX\nJWT_SECRET=\nJWT_EXPIRESIN=10m\nMONGO_HOST=mongodb://mongo:27017/fmdb\nMONGOOSE_DEBUG=false\nMOODLE_BASE_URL=https://moodle.example.com/\nMOODLE_FETCH_INTERVAL=900000\nMOODLE_REMINDER_TIME_LEFT=86400\nMOODLE_TOKEN=XXXXXXXXXXXXXXXXX\nMOODLE_USE_COURSE_SHORTNAME=true\nMOODLE_USERID=00000\nNODE_ENV=production\nPORT=4040\n")),(0,l.kt)("h2",{id:"-description"},"\ud83e\udd13 Description"),(0,l.kt)("p",null,"Here you can finde a detailed description of available environment variables. Variables marked with \ud83d\udd34 ",(0,l.kt)("em",{parentName:"p"},"are required")," !"),(0,l.kt)("h3",{id:"-admin_id"},"\ud83d\udd34 ADMIN_ID"),(0,l.kt)("p",null,'Discord-Id of the initial administrator. More can be added later via web interface. To get the id, activate the "Developer Mode" in Discord. More information can you find ',(0,l.kt)("a",{parentName:"p",href:"https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID-"},"here"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number. "),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"912309123909091230992"))),(0,l.kt)("h3",{id:"-admin_name"},"\ud83d\udd34 ADMIN_NAME"),(0,l.kt)("p",null,"Username of the initial administrator in form of ",(0,l.kt)("inlineCode",{parentName:"p"},"username#0000"),". More can be added later via web interface."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string; Needs to match ",(0,l.kt)("inlineCode",{parentName:"li"},"/^[\\w\\s]{2,32}#\\d{4}$/")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"user name#1234"))),(0,l.kt)("h3",{id:"-discord_channel"},"\ud83d\udd34 DISCORD_CHANNEL"),(0,l.kt)("p",null,'Id of the channel in discord, where all notification should be published. To get the id, activate the "Developer Mode" in Discord. More information can you find ',(0,l.kt)("a",{parentName:"p",href:"https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID-"},"here"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"912309123909091230992"))),(0,l.kt)("h3",{id:"-discord_token"},"\ud83d\udd34 DISCORD_TOKEN"),(0,l.kt)("p",null,"Token you got from the Discord-Developer-Portal. Instructions, how you can create your own token, can you ",(0,l.kt)("a",{parentName:"p",href:"setup-prepare#-create-a-new-discord-bot"},"here")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"123asdasd.asdk123m123bk123123.n23kn1n2k3nk123"))),(0,l.kt)("h3",{id:"-jwt_secret-\ufe0f"},"\ud83d\udd34 JWT_SECRET \u26a0\ufe0f"),(0,l.kt)("p",null,"Secret that is used to sign your authentication token. ",(0,l.kt)("strong",{parentName:"p"},"Choose a very strong secret!")," You do not have to save it, but ",(0,l.kt)("strong",{parentName:"p"},"it must be strong!")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string;"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"ks454DF)ad!sd084!"))),(0,l.kt)("h3",{id:"jwt_expiresin"},"JWT_EXPIRESIN"),(0,l.kt)("p",null,"Defines, how long you will stay logged in at the web interface. ",(0,l.kt)("inlineCode",{parentName:"p"},"10m")," is a good value."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string; unit at the end"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"10m")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"3h"))),(0,l.kt)("h3",{id:"-mongo_host"},"\ud83d\udd34 MONGO_HOST"),(0,l.kt)("p",null,"Path to your mongodb instance."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"mongodb://mongo:27017/fmdb?ssl=true"))),(0,l.kt)("h3",{id:"mongoose_debug-only-needed-for-development"},"MONGOOSE_DEBUG (only needed for development)"),(0,l.kt)("p",null,"Activates logging of mongodb queries. Only needed for development."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Boolean (",(0,l.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false"))),(0,l.kt)("h3",{id:"-moodle_base_url"},"\ud83d\udd34 MOODLE_BASE_URL"),(0,l.kt)("p",null,"The URL where the moodle instance is running. You can check and generate this variable on ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string and a valid RFC 3986 URI"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"https://moodle.myuniversity.edu"))),(0,l.kt)("h3",{id:"moodle_fetch_interval"},"MOODLE_FETCH_INTERVAL"),(0,l.kt)("p",null,"Defines how often the FMDB looks for updates on the moodle instance. Intervall ",(0,l.kt)("em",{parentName:"p"},"in milliseconds"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"900000")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"1500000"))),(0,l.kt)("h3",{id:"moodle_reminder_time_left"},"MOODLE_REMINDER_TIME_LEFT"),(0,l.kt)("p",null,"If the remaining time of a submission is less than the specified time, a notification will be sent. Time ",(0,l.kt)("em",{parentName:"p"},"in seconds"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"86400")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"86400"))),(0,l.kt)("h3",{id:"-moodle_token"},"\ud83d\udd34 MOODLE_TOKEN"),(0,l.kt)("p",null,"Token to log in to the specified Moodle instance. You can maybe get this from your settings or from ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"asdbasd123asdb123123jnj5234nbadjn12332"))),(0,l.kt)("h3",{id:"moodle_use_course_shortname"},"MOODLE_USE_COURSE_SHORTNAME"),(0,l.kt)("p",null,"Whether to use short- or fullname of the courses in the discord message."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Boolean (",(0,l.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"true")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false"))),(0,l.kt)("h3",{id:"-moodle_userid"},"\ud83d\udd34 MOODLE_USERID"),(0,l.kt)("p",null,"Your user id on the specified Moodle instance. It is part of the URL if you open your Moodle-Profile. ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me")," can help you with this."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"12345"))),(0,l.kt)("h3",{id:"node_env"},"NODE_ENV"),(0,l.kt)("p",null,"Defines the environment, where the bot will be started."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Only allowed values: ",(0,l.kt)("inlineCode",{parentName:"li"},"development"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"production"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"test"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"provision")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"production")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"development"))),(0,l.kt)("h3",{id:"port"},"PORT"),(0,l.kt)("p",null,"Defines on which Port your sever listens."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Needs to be a number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"4040")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"8080"))))}p.isMDXComponent=!0}}]);