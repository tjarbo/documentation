(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[788],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=p(n),m=o,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||a;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},1994:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return d}});var r=n(2122),o=n(9756),a=(n(7294),n(3905)),i=["components"],l={title:"Preparation",hide_title:!0,hide_table_of_contents:!1,description:"Prepare discord and moodle to run the fmdb",keywords:["discord","moodle","bot"],slug:"/setup-prepare"},s={unversionedId:"setup-preparation",id:"setup-preparation",isDocsHomePage:!1,title:"Preparation",description:"Prepare discord and moodle to run the fmdb",source:"@site/moodlebot/setup-preparation.md",sourceDirName:".",slug:"/setup-prepare",permalink:"/moodle-notification-service/2.0.0/setup-prepare",editUrl:"https://github.com/tjarbo/documentation/tree/master/docs/moodlebot/moodlebot/setup-preparation.md",version:"current",frontMatter:{title:"Preparation",hide_title:!0,hide_table_of_contents:!1,description:"Prepare discord and moodle to run the fmdb",keywords:["discord","moodle","bot"],slug:"/setup-prepare"}},p=[{value:"\ud83c\udf73 General preparation",id:"-general-preparation",children:[{value:"\ud83e\udd16 Create a new Discord-Bot",id:"-create-a-new-discord-bot",children:[]},{value:"\ud83c\udfeb Generate your new Moodle-Token",id:"-generate-your-new-moodle-token",children:[]},{value:"\u3299\ufe0f Setup your environment variables",id:"\ufe0f-setup-your-environment-variables",children:[]},{value:"\u23ed\ufe0f What next ?",id:"\ufe0f-what-next-",children:[]}]}],u={toc:p};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"-general-preparation"},"\ud83c\udf73 General preparation"),(0,a.kt)("p",null,"Before you can start your own bot, you need to set up your own Discord-Bot and to generate your Moodle credentials. The following steps will guide you through this process. Then you will create the ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," file."),(0,a.kt)("h3",{id:"-create-a-new-discord-bot"},"\ud83e\udd16 Create a new Discord-Bot"),(0,a.kt)("p",null,"Because there is already a good instruction out there about how to set up a new discord bot, please follow all the steps described in ",(0,a.kt)("a",{parentName:"p",href:"https://discordpy.readthedocs.io/en/latest/discord.html"},"this")," article."),(0,a.kt)("p",null,"The important points are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Save the token from step 7 (section 1). You will need it later for the environment variables (",(0,a.kt)("inlineCode",{parentName:"li"},"DISCORD_TOKEN="),")"),(0,a.kt)("li",{parentName:"ul"},"Give the bot all ",(0,a.kt)("em",{parentName:"li"},"Text Permissions"))),(0,a.kt)("h3",{id:"-generate-your-new-moodle-token"},"\ud83c\udfeb Generate your new Moodle-Token"),(0,a.kt)("p",null,"For this step, you need an existing Moodle account (that can be yours). This account needs access to all courses you want to receive notifications from."),(0,a.kt)("p",null,"We created an online tool, to make it as simple as possible for you: Open ",(0,a.kt)("a",{parentName:"p",href:"http://fmdb.tjarbo.me"},"fmdb.tjarbo.me")," and fill out the form to generate all required environment variables. Note, that no data will be stored or send to any other server than the submitted moodle server! Your credentials will be send to the official API of your moodle instance to receive a new token. You need the displayed results for the next step.  "),(0,a.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Right now, SSO is not official supported \u2639\ufe0f We need to figure out how to implement this authentication method. Lernraum Berlin ? -> Click ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/tjarbo/discord-moodle-bot/issues/83#issuecomment-757985921"},"here")))),(0,a.kt)("h3",{id:"\ufe0f-setup-your-environment-variables"},"\u3299\ufe0f Setup your environment variables"),(0,a.kt)("p",null,"This file contains the initial and background configuration of your FMDB. Create a new file ",(0,a.kt)("inlineCode",{parentName:"p"},".env")," on your system and copy and paste the template from ",(0,a.kt)("a",{parentName:"p",href:"what-is-inside-env.md"},"this page"),". There you can also find a description about each variable. Make sure that:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You have entered the Discord token you saved from the first step."),(0,a.kt)("li",{parentName:"ul"},"You have entered the Moodle values from the last step."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NODE_ENV")," is set to ",(0,a.kt)("inlineCode",{parentName:"li"},"PRODUCTION")),(0,a.kt)("li",{parentName:"ul"},"You changed ",(0,a.kt)("inlineCode",{parentName:"li"},"JWT_SECRET")," to a very strong value !!! (You can use a ",(0,a.kt)("a",{parentName:"li",href:"https://www.lastpass.com/password-generator"},"password generator")," for this)")),(0,a.kt)("h3",{id:"\ufe0f-what-next-"},"\u23ed\ufe0f What next ?"),(0,a.kt)("p",null,"Now you are ready to setup your own fmdb! You can choose between"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/moodle-notification-service/2.0.0/setup-with-docker"},"Docker (recommended)")," \ud83d\udc33"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"setup-with-heroku-and-mongodb-atlas.md"},"Heroku & MongoDB Atlas (cloud)"))))}d.isMDXComponent=!0}}]);