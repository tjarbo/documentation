(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[860],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return k}});var i=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,i,a=function(e,t){if(null==e)return{};var n,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)n=l[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=i.createContext({}),m=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=m(e.components);return i.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},u=i.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),u=m(n),k=a,c=u["".concat(s,".").concat(k)]||u[k]||p[k]||l;return n?i.createElement(c,r(r({ref:t},d),{},{components:n})):i.createElement(c,r({ref:t},d))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,r=new Array(l);r[0]=u;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var m=2;m<l;m++)r[m]=n[m];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}u.displayName="MDXCreateElement"},8793:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},metadata:function(){return s},toc:function(){return m},default:function(){return p}});var i=n(2122),a=n(9756),l=(n(7294),n(3905)),r=["components"],o={title:"What is inside .env ?",hide_title:!0,hide_table_of_contents:!1,description:"Description of .env",keywords:["moodle","notification","server","environment","variables"]},s={unversionedId:"advanced-guides/what-is-inside-env",id:"advanced-guides/what-is-inside-env",isDocsHomePage:!1,title:"What is inside .env ?",description:"Description of .env",source:"@site/moodlebot/advanced-guides/what-is-inside-env.md",sourceDirName:"advanced-guides",slug:"/advanced-guides/what-is-inside-env",permalink:"/moodle-notification-service/2.0.0/advanced-guides/what-is-inside-env",editUrl:"https://github.com/tjarbo/documentation/tree/master/docs/moodlebot/moodlebot/advanced-guides/what-is-inside-env.md",version:"current",frontMatter:{title:"What is inside .env ?",hide_title:!0,hide_table_of_contents:!1,description:"Description of .env",keywords:["moodle","notification","server","environment","variables"]},sidebar:"tutorialSidebar",previous:{title:"configure-via-env",permalink:"/moodle-notification-service/2.0.0/advanced-guides/configure-via-env"},next:{title:"\ud83d\udce6 Use MongoDB Atlas",permalink:"/moodle-notification-service/2.0.0/advanced-guides/use-mongodb-atlas"}},m=[{value:"\ud83c\udfad Templates",id:"-templates",children:[{value:"Only required variables",id:"only-required-variables",children:[]},{value:"All available variables",id:"all-available-variables",children:[]}]},{value:"Descriptions",id:"descriptions",children:[{value:"CONNECTOR_LOG_LIFETIME",id:"connector_log_lifetime",children:[]},{value:"DISCORD_CHANNEL",id:"discord_channel",children:[]},{value:"DISCORD_TOKEN",id:"discord_token",children:[]},{value:"\ud83d\udd34 JWT_SECRET \u26a0\ufe0f",id:"-jwt_secret-\ufe0f",children:[]},{value:"JWT_EXPIRESIN",id:"jwt_expiresin",children:[]},{value:"\ud83d\udd34 MONGO_HOST",id:"-mongo_host",children:[]},{value:"MONGOOSE_DEBUG (only needed for development)",id:"mongoose_debug-only-needed-for-development",children:[]},{value:"\ud83d\udd34 MOODLE_BASE_URL",id:"-moodle_base_url",children:[]},{value:"MOODLE_FETCH_INTERVAL",id:"moodle_fetch_interval",children:[]},{value:"MOODLE_REMINDER_TIME_LEFT",id:"moodle_reminder_time_left",children:[]},{value:"\ud83d\udd34 MOODLE_TOKEN",id:"-moodle_token",children:[]},{value:"MOODLE_USE_COURSE_SHORTNAME",id:"moodle_use_course_shortname",children:[]},{value:"\ud83d\udd34 MOODLE_USERID",id:"-moodle_userid",children:[]},{value:"NODE_ENV",id:"node_env",children:[]},{value:"PORT",id:"port",children:[]},{value:"REGISTRATION_TOKEN_LIFETIME",id:"registration_token_lifetime",children:[]},{value:"RP_NAME",id:"rp_name",children:[]},{value:"\ud83d\udd34 RP_ID",id:"-rp_id",children:[]},{value:"\ud83d\udd34 RP_ORIGIN",id:"-rp_origin",children:[]}]}],d={toc:m};function p(e){var t=e.components,n=(0,a.Z)(e,r);return(0,l.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h2",{id:"-templates"},"\ud83c\udfad Templates"),(0,l.kt)("h3",{id:"only-required-variables"},"Only required variables"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"JWT_SECRET=\nMONGO_HOST=mongodb://mongo:27017/fmdb\nMOODLE_BASE_URL=https://moodle.example.com/\nMOODLE_TOKEN=XXXXXXXXXXXXXXXXX\nMOODLE_USERID=00000\nRP_ID=NotificationService\nRP_ORIGIN=https://notificationservice.tjarbo.me\n")),(0,l.kt)("h3",{id:"all-available-variables"},"All available variables"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"CONNECTOR_LOG_LIFETIME=31d\nDISCORD_CHANNEL=00000...000\nDISCORD_TOKEN=XXXXXX....XXX\nJWT_SECRET=\nJWT_EXPIRESIN=10m\nMONGO_HOST=mongodb://mongo:27017/fmdb\nMONGOOSE_DEBUG=false\nMOODLE_BASE_URL=https://moodle.example.com/\nMOODLE_FETCH_INTERVAL=900000\nMOODLE_REMINDER_TIME_LEFT=86400\nMOODLE_TOKEN=XXXXXXXXXXXXXXXXX\nMOODLE_USE_COURSE_SHORTNAME=true\nMOODLE_USERID=00000\nNODE_ENV=production\nPORT=4040\nREGISTRATION_TOKEN_LIFETIME=15m\nRP_NAME=Notification Service for Moodle\nRP_ID=\nRP_ORIGIN=\n")),(0,l.kt)("h2",{id:"descriptions"},"Descriptions"),(0,l.kt)("p",null,"Here you can find a detailed description of available environment variables. Variables marked with \ud83d\udd34 ",(0,l.kt)("em",{parentName:"p"},"are required")," !"),(0,l.kt)("h3",{id:"connector_log_lifetime"},"CONNECTOR_LOG_LIFETIME"),(0,l.kt)("p",null,"Defines how long the logs will be stored and available. "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string following the pattern: ","[0-9]","+(d)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"31d")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"12h"))),(0,l.kt)("h3",{id:"discord_channel"},"DISCORD_CHANNEL"),(0,l.kt)("p",null,'Id of the channel in discord, where all notification should be published. To get the id, activate the "Developer Mode" in Discord. More information can you find ',(0,l.kt)("a",{parentName:"p",href:"https://support.discord.com/hc/en-us/articles/206346498-Where-can-I-find-my-User-Server-Message-ID-"},"here"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"912309123909091230992"))),(0,l.kt)("h3",{id:"discord_token"},"DISCORD_TOKEN"),(0,l.kt)("p",null,"Token you got from the Discord-Developer-Portal. Instructions, how you can create your own token, can you ",(0,l.kt)("a",{parentName:"p",href:"setup-preparation#-create-a-new-discord-bot"},"here")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"123asdasd.asdk123m123bk123123.n23kn1n2k3nk123"))),(0,l.kt)("h3",{id:"-jwt_secret-\ufe0f"},"\ud83d\udd34 JWT_SECRET \u26a0\ufe0f"),(0,l.kt)("p",null,"Secret that is used to sign your authentication token. ",(0,l.kt)("strong",{parentName:"p"},"Choose a very strong secret!")," You do not have to save it, but ",(0,l.kt)("strong",{parentName:"p"},"it must be strong!")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string;"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"ks454DF)ad!sd084!"))),(0,l.kt)("h3",{id:"jwt_expiresin"},"JWT_EXPIRESIN"),(0,l.kt)("p",null,"Defines, how long you will stay logged in at the web interface. ",(0,l.kt)("inlineCode",{parentName:"p"},"10m")," is a good value."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string; unit at the end"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"10m")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"3h"))),(0,l.kt)("h3",{id:"-mongo_host"},"\ud83d\udd34 MONGO_HOST"),(0,l.kt)("p",null,"Path to your mongodb instance."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"mongodb://mongo:27017/fmdb?ssl=true"))),(0,l.kt)("h3",{id:"mongoose_debug-only-needed-for-development"},"MONGOOSE_DEBUG (only needed for development)"),(0,l.kt)("p",null,"Activates logging of mongodb queries. Only needed for development."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Boolean (",(0,l.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false"))),(0,l.kt)("h3",{id:"-moodle_base_url"},"\ud83d\udd34 MOODLE_BASE_URL"),(0,l.kt)("p",null,"The URL where the moodle instance is running. You can check and generate this variable on ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string and a valid RFC 3986 URI"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"https://moodle.myuniversity.edu"))),(0,l.kt)("h3",{id:"moodle_fetch_interval"},"MOODLE_FETCH_INTERVAL"),(0,l.kt)("p",null,"Defines how often the FMDB looks for updates on the moodle instance. Interval ",(0,l.kt)("em",{parentName:"p"},"in milliseconds"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"900000")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"1500000"))),(0,l.kt)("h3",{id:"moodle_reminder_time_left"},"MOODLE_REMINDER_TIME_LEFT"),(0,l.kt)("p",null,"If the remaining time of a submission is less than the specified time, a notification will be sent. Time ",(0,l.kt)("em",{parentName:"p"},"in seconds"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"86400")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"86400"))),(0,l.kt)("h3",{id:"-moodle_token"},"\ud83d\udd34 MOODLE_TOKEN"),(0,l.kt)("p",null,"Token to log in to the specified Moodle instance. You can maybe get this from your settings or from ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me"),"."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"asdbasd123asdb123123jnj5234nbadjn12332"))),(0,l.kt)("h3",{id:"moodle_use_course_shortname"},"MOODLE_USE_COURSE_SHORTNAME"),(0,l.kt)("p",null,"Whether to use short- or fullname of the courses in the discord message."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Boolean (",(0,l.kt)("inlineCode",{parentName:"li"},"true")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),")"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"true")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"false"))),(0,l.kt)("h3",{id:"-moodle_userid"},"\ud83d\udd34 MOODLE_USERID"),(0,l.kt)("p",null,"Your user id on the specified Moodle instance. It is part of the URL if you open your Moodle-Profile. ",(0,l.kt)("a",{parentName:"p",href:"https://fmdb.tjarbo.me"},"https://fmdb.tjarbo.me")," can help you with this."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"12345"))),(0,l.kt)("h3",{id:"node_env"},"NODE_ENV"),(0,l.kt)("p",null,"Defines the environment, where the bot will be started."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Only allowed values: ",(0,l.kt)("inlineCode",{parentName:"li"},"development"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"production"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"test"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"provision")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"production")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"development"))),(0,l.kt)("h3",{id:"port"},"PORT"),(0,l.kt)("p",null,"Defines on which Port your sever listens."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Needs to be a number"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default value:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"4040")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"8080"))),(0,l.kt)("h3",{id:"registration_token_lifetime"},"REGISTRATION_TOKEN_LIFETIME"),(0,l.kt)("p",null,"Defines how long a registration token will be valid to add a new user as administrator. After the registration token has been used, it becomes invalid independent from the lifetime."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string following the pattern: ","[0-9]","+(d)"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"15m")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"12h"))),(0,l.kt)("h3",{id:"rp_name"},"RP_NAME"),(0,l.kt)("p",null,"A human friendly readable title used for WebAuthn."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Default:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"Notification Service")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"My fancy notification service"))),(0,l.kt)("h3",{id:"-rp_id"},"\ud83d\udd34 RP_ID"),(0,l.kt)("p",null,"Unique identifier for the notification service used for WebAuthn. I have not figured out yet, were it becomes important that this must be unique. Only if you use multiple services? Only if you manage multiple notification services? All under one domain? Idk ..."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"NotificationServiceID"))),(0,l.kt)("h3",{id:"-rp_origin"},"\ud83d\udd34 RP_ORIGIN"),(0,l.kt)("p",null,"This must be a ",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Fully_qualified_domain_name"},"FQDN")," where your application will be running on. It is important that it matches exactly the domain (see example) were you will to the login and registration procedure on."),(0,l.kt)("p",null,"If you do not know the domain name right now, enter a placeholder value and update it afterwards. Registration and login will fail until RP_ORIGIN will match the domain name"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Requirements:")," Type of string and a valid RFC 3986 URI"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Example:")," ",(0,l.kt)("inlineCode",{parentName:"li"},"https://notificationservice.tjarbo.me"))))}p.isMDXComponent=!0}}]);