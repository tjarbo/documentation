<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<title data-react-helmet="true">Preparation | tjarbo&#x27;s documentation</title><meta data-react-helmet="true" property="og:url" content="https://docs.tjarbo.me/moodle-notification-service/2.0.0/setup-prepare"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-moodlebot-current"><meta data-react-helmet="true" property="og:title" content="Preparation | tjarbo&#x27;s documentation"><meta data-react-helmet="true" name="description" content="Prepare discord and moodle to run the fmdb"><meta data-react-helmet="true" property="og:description" content="Prepare discord and moodle to run the fmdb"><meta data-react-helmet="true" name="keywords" content="discord,moodle,bot"><link data-react-helmet="true" rel="shortcut icon" href="/img/book-2px.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.tjarbo.me/moodle-notification-service/2.0.0/setup-prepare"><link data-react-helmet="true" rel="alternate" href="https://docs.tjarbo.me/moodle-notification-service/2.0.0/setup-prepare" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.tjarbo.me/moodle-notification-service/2.0.0/setup-prepare" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.0cf71914.css">
<link rel="preload" href="/assets/js/runtime~main.9a640c4a.js" as="script">
<link rel="preload" href="/assets/js/main.911e37e1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/book-2px.svg" alt="Feather Icon Book" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/book-2px.svg" alt="Feather Icon Book" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">tjarbo&#x27;s doc</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/moodle-notification-service/2.0.0/home">Moodle Notification Service</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/moodle-notification-service/2.0.0/home">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/moodle-notification-service/2.0.0/setup-prepare">Next</a></li><li><a class="dropdown__link" href="/moodle-notification-service/1.0.0/setup-prepare">1.0.0</a></li></ul></div><a href="https://twitter.com/tjarbo_dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter</a><a href="https://github.com/tjarbo" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/book-2px.svg" alt="Feather Icon Book" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/book-2px.svg" alt="Feather Icon Book" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">tjarbo&#x27;s doc</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/moodle-notification-service/2.0.0/home">Moodle Notification Service</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/moodle-notification-service/2.0.0/setup-prepare">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/moodle-notification-service/1.0.0/setup-prepare">1.0.0</a></li></ul></li><li class="menu__list-item"><a href="https://twitter.com/tjarbo_dev" target="_blank" rel="noopener noreferrer" class="menu__link">Twitter</a></li><li class="menu__list-item"><a href="https://github.com/tjarbo" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/moodle-notification-service/2.0.0/home">Home</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Setup your bot</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/moodle-notification-service/2.0.0/setup-prepare">Preparation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/moodle-notification-service/2.0.0/setup-with-docker">Run on Docker</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/moodle-notification-service/2.0.0/setup-with-heroku-mongodb-atlas">Run on Heroku and MongoDB Atlas</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/moodle-notification-service/2.0.0/whats-inside-env">What is inside .env ?</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for tjarbo&#x27;s documentation <strong>Next</strong> version.</div><div class="margin-top--md">For up-to-date documentation, see the <strong><a href="/moodle-notification-service/1.0.0/setup-prepare">latest version</a></strong> (1.0.0).</div></div><div class="docItemContainer_33ec"><article><div><span class="badge badge--secondary">Version: Next</span></div><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-general-preparation"></a>üç≥ General preparation<a class="hash-link" href="#-general-preparation" title="Direct link to heading">#</a></h2><p>Before you can start your own bot, you need to set up your own Discord-Bot and to generate your Moodle credentials. The following steps will guide you through this process. Then you will create the <code>.env</code> file.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-create-a-new-discord-bot"></a>ü§ñ Create a new Discord-Bot<a class="hash-link" href="#-create-a-new-discord-bot" title="Direct link to heading">#</a></h3><p>Because there is already a good instruction out there about how to set up a new discord bot, please follow all the steps described in <a href="https://discordpy.readthedocs.io/en/latest/discord.html" target="_blank" rel="noopener noreferrer">this</a> article.</p><p>The important points are:</p><ul><li>Save the token from step 7 (section 1). You will need it later for the environment variables (<code>DISCORD_TOKEN=</code>)</li><li>Give the bot all <em>Text Permissions</em></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="-generate-your-new-moodle-token"></a>üè´ Generate your new Moodle-Token<a class="hash-link" href="#-generate-your-new-moodle-token" title="Direct link to heading">#</a></h3><p>For this step, you need an existing Moodle account (that can be yours). This account needs access to all courses you want to receive notifications from.</p><p>We created an online tool, to make it as simple as possible for you: Open <a href="http://fmdb.tjarbo.me" target="_blank" rel="noopener noreferrer">fmdb.tjarbo.me</a> and fill out the form to generate all required environment variables. Note, that no data will be stored or send to any other server than the submitted moodle server! Your credentials will be send to the official API of your moodle instance to receive a new token. You need the displayed results for the next step.  </p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Right now, SSO is not official supported ‚òπÔ∏è We need to figure out how to implement this authentication method. Lernraum Berlin ? -&gt; Click <a href="https://github.com/tjarbo/discord-moodle-bot/issues/83#issuecomment-757985921" target="_blank" rel="noopener noreferrer">here</a></p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="Ô∏è-setup-your-environment-variables"></a>„äôÔ∏è Setup your environment variables<a class="hash-link" href="#Ô∏è-setup-your-environment-variables" title="Direct link to heading">#</a></h3><p>This file contains the initial and background configuration of your FMDB. Create a new file <code>.env</code> on your system and copy and paste the template from <a href="/moodle-notification-service/2.0.0/whats-inside-env">this page</a>. There you can also find a description about each variable. Make sure that:</p><ul><li>You have entered the Discord token you saved from the first step.</li><li>You have entered the Moodle values from the last step.</li><li><code>NODE_ENV</code> is set to <code>PRODUCTION</code></li><li>You changed <code>JWT_SECRET</code> to a very strong value !!! (You can use a <a href="https://www.lastpass.com/password-generator" target="_blank" rel="noopener noreferrer">password generator</a> for this)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="Ô∏è-what-next-"></a>‚è≠Ô∏è What next ?<a class="hash-link" href="#Ô∏è-what-next-" title="Direct link to heading">#</a></h3><p>Now you are ready to setup your own fmdb! You can choose between</p><ul><li><a href="/moodle-notification-service/2.0.0/setup-with-docker">Docker (recommended)</a> üê≥</li><li><a href="/moodle-notification-service/2.0.0/setup-with-heroku-mongodb-atlas">Heroku &amp; MongoDB Atlas (cloud)</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/tjarbo/documentation/tree/master/docs/moodlebot/moodlebot/setup-preparation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/moodle-notification-service/2.0.0/home"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Home</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/moodle-notification-service/2.0.0/setup-with-docker"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Run on Docker ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-general-preparation" class="table-of-contents__link">üç≥ General preparation</a><ul><li><a href="#-create-a-new-discord-bot" class="table-of-contents__link">ü§ñ Create a new Discord-Bot</a></li><li><a href="#-generate-your-new-moodle-token" class="table-of-contents__link">üè´ Generate your new Moodle-Token</a></li><li><a href="#Ô∏è-setup-your-environment-variables" class="table-of-contents__link">„äôÔ∏è Setup your environment variables</a></li><li><a href="#Ô∏è-what-next-" class="table-of-contents__link">‚è≠Ô∏è What next ?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 A tjarbo project. Built with Docusaurus. Icon from feathericons.com</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9a640c4a.js"></script>
<script src="/assets/js/main.911e37e1.js"></script>
</body>
</html>